<!--index.wxml-->
<view class="container">
  <!-- 主标题 -->
  <view class="header">
    <view class="title-container">
      <text class="main-title">棋牌计分器</text>
      <text class="subtitle">轻松记录每一局的精彩</text>
    </view>
  </view>

  <!-- 功能选择卡片 -->
  <view class="function-cards">
    <view class="card action-card" bindtap="createRoom">
      <view class="card-icon">
        <text class="icon">🏠</text>
      </view>
      <view class="card-content">
        <text class="card-title">我要开房</text>
        <text class="card-desc">创建新的游戏房间</text>
      </view>
      <view class="card-arrow">
        <text class="arrow">→</text>
      </view>
    </view>

    <view class="card action-card" bindtap="scanCode">
      <view class="card-icon">
        <text class="icon">📱</text>
      </view>
      <view class="card-content">
        <text class="card-title">扫码进房</text>
        <text class="card-desc">扫描二维码加入房间</text>
      </view>
      <view class="card-arrow">
        <text class="arrow">→</text>
      </view>
    </view>

    <view class="card action-card" bindtap="showJoinRoomModal">
      <view class="card-icon">
        <text class="icon">🔢</text>
      </view>
      <view class="card-content">
        <text class="card-title">输入房间号</text>
        <text class="card-desc">手动输入房间号加入</text>
      </view>
      <view class="card-arrow">
        <text class="arrow">→</text>
      </view>
    </view>
  </view>

  <!-- 装饰元素 -->
  <view class="decoration">
    <view class="floating-card card-1"></view>
    <view class="floating-card card-2"></view>
    <view class="floating-card card-3"></view>
  </view>
</view>

<!-- 手动加入房间弹窗 -->
<view wx:if="{{showJoinModal}}" class="modal-overlay" bindtap="closeJoinModal">
  <view class="join-modal" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">加入房间</text>
      <button class="modal-close" bindtap="closeJoinModal">×</button>
    </view>
    
    <view class="modal-content">
      <view class="input-section">
        <text class="input-label">房间号</text>
        <input 
          class="room-input" 
          type="text" 
          placeholder="请输入房间号" 
          value="{{roomIdInput}}"
          bindinput="onRoomIdInput"
          focus="{{showJoinModal}}"
          maxlength="20"
        />
        <text class="input-hint">请输入好友分享的房间号</text>
      </view>
    </view>
    
    <view class="modal-actions">
      <button class="btn-secondary modal-btn" bindtap="closeJoinModal">取消</button>
      <button class="btn-primary modal-btn" bindtap="confirmJoinRoom" disabled="{{!roomIdInput}}">加入房间</button>
    </view>
  </view>
</view>